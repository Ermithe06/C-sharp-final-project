<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:vm="clr-namespace:Maui.Charting.ViewModels"
             x:Class="Maui.Charting.Views.EditAppointmentPage">

    <ScrollView>
        <VerticalStackLayout Padding="14" Spacing="14">

            <Label Text="Diagnoses" FontAttributes="Bold" FontSize="18" />

            <HorizontalStackLayout>
                <Entry Placeholder="New Diagnosis"
                       Text="{Binding NewDiagnosis}" />
                <Button Text="Add" Command="{Binding AddDiagnosisCommand}" />
            </HorizontalStackLayout>

            <CollectionView ItemsSource="{Binding Diagnoses}">
                <CollectionView.ItemTemplate>
                    <DataTemplate>
                        <HorizontalStackLayout>
                            <Label Text="{Binding}" />
                            <Button Text="X"
                                    Command="{Binding Source={RelativeSource AncestorType={x:Type vm:AppointmentDetailViewModel}}, Path=DeleteDiagnosisCommand}"
                                    CommandParameter="{Binding}" />
                        </HorizontalStackLayout>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>


            <Label Text="Treatments" FontAttributes="Bold" FontSize="18" />

            <HorizontalStackLayout>
                <Entry Placeholder="Treatment Name"
                       Text="{Binding NewTreatmentName}" />
                <Entry Placeholder="Cost"
                       Keyboard="Numeric"
                       Text="{Binding NewTreatmentCost}" />
                <Button Text="Add" Command="{Binding AddTreatmentCommand}" />
            </HorizontalStackLayout>

            <CollectionView ItemsSource="{Binding Treatments}">
                <CollectionView.ItemTemplate>
                    <DataTemplate>
                        <HorizontalStackLayout>
                            <Label Text="{Binding Name}" />
                            <Label Text="{Binding Cost, StringFormat='${0:F2}'}" />
                            <Button Text="X"
                                    Command="{Binding Source={RelativeSource AncestorType={x:Type vm:AppointmentDetailViewModel}}, Path=DeleteTreatmentCommand}"
                                    CommandParameter="{Binding}" />
                        </HorizontalStackLayout>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>

        </VerticalStackLayout>
    </ScrollView>
</ContentPage>
